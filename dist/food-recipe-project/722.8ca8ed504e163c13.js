"use strict";(self.webpackChunkFood_Recipe_Project=self.webpackChunkFood_Recipe_Project||[]).push([[722],{9722:(W,u,s)=>{s.r(u),s.d(u,{RecipesModule:()=>P});var y=s(3887),d=s(177),p=s(7062),k=s(6920),e=s(7705),f=s(6358),F=s(9825),R=s(9685),v=s(5351),b=s(5794),a=s(9417),C=s(9213),h=s(1806),I=s(8834),S=s(6440),m=s(882),j=s(7250),_=s(6600);function x(i,r){if(1&i&&(e.j41(0,"mat-option",17),e.EFF(1),e.k0s()),2&i){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(1),e.JRh(t.name)}}function $(i,r){if(1&i&&(e.j41(0,"mat-option",17),e.EFF(1),e.k0s()),2&i){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(1),e.JRh(t.name)}}function T(i,r){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=r.$implicit;e.R7$(1),e.SpI("",t.name," , ")}}const D=function(i){return["edit",i]};function G(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",24),e.nrm(6,"img",25),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.DNE(12,T,2,1,"span",22),e.k0s(),e.j41(13,"td"),e.EFF(14),e.nI1(15,"date"),e.k0s(),e.j41(16,"td"),e.EFF(17),e.nI1(18,"date"),e.k0s(),e.j41(19,"td")(20,"button",26)(21,"mat-icon",27),e.EFF(22,"more_horiz"),e.k0s()(),e.j41(23,"mat-menu",null,28)(25,"button",29)(26,"mat-icon",27),e.EFF(27,"edit_square"),e.k0s(),e.j41(28,"span"),e.EFF(29,"Edit"),e.k0s()(),e.j41(30,"button",30),e.bIt("click",function(){const c=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.openDeleteCategoryDialog(c))}),e.j41(31,"mat-icon",27),e.EFF(32,"delete"),e.k0s(),e.j41(33,"span"),e.EFF(34,"Delete"),e.k0s()()()()()}if(2&i){const t=r.$implicit,n=e.sdS(24),o=e.XpG(2);e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.price),e.R7$(2),e.Y8G("src",t.imagePath?o.imagePath+t.imagePath:o.dummyImage,e.B4B),e.R7$(2),e.JRh(t.description),e.R7$(2),e.JRh(t.tag.name),e.R7$(2),e.Y8G("ngForOf",t.category),e.R7$(2),e.JRh(e.i5U(15,10,t.creationDate,"dd/MMM/yyyy")),e.R7$(3),e.JRh(e.i5U(18,13,t.modificationDate,"dd/MMM/yyyy")),e.R7$(3),e.Y8G("matMenuTriggerFor",n),e.R7$(5),e.Y8G("routerLink",e.eq3(16,D,t.id))}}function M(i,r){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"table",20)(2,"thead",21)(3,"th"),e.EFF(4,"Name"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Price"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Image"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Description"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Tag"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Category"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Creation Date"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Modification Date"),e.k0s(),e.j41(19,"th"),e.EFF(20,"Actions"),e.k0s()(),e.j41(21,"tbody",21),e.DNE(22,G,35,18,"tr",22),e.k0s()(),e.j41(23,"mat-paginator",23),e.bIt("page",function(o){e.eBV(t);const c=e.XpG();return e.Njj(c.handlePageEvent(o))}),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(22),e.Y8G("ngForOf",t.tableData),e.R7$(1),e.Y8G("length",null==t.tableResponse?null:t.tableResponse.totalNumberOfRecords)("pageIndex",null==t.tableResponse?null:t.tableResponse.pageNumber)("pageSize",null==t.tableResponse?null:t.tableResponse.pageSize)("pageSizeOptions",t.pageSizeOptions)("showFirstLastButtons",t.showFirstLastButtons)}}function w(i,r){1&i&&(e.j41(0,"div")(1,"div",21),e.nrm(2,"img",31),e.j41(3,"h5"),e.EFF(4,"No Data"),e.k0s()()())}let z=(()=>{class i{constructor(t,n,o,c,l){this._CategoryService=t,this._HelperService=n,this._RecipesService=o,this.dialog=c,this._ToastrService=l,this.imagePath="https://upskilling-egypt.com:3006/",this.dummyImage="../../../../assets/images/recipes.jpg",this.tableData=[],this.searchkey="",this.tags=[],this.categories=[],this.tagId=0,this.categoryId=0,this.length=50,this.pageSize=5,this.pageIndex=0,this.pageSizeOptions=[5,10,25],this.showPageSizeOptions=!0,this.showFirstLastButtons=!0}ngOnInit(){this.getRecipes(),this.getAllTags(),this.getAllcategories()}searchByName(){}getRecipes(){this._RecipesService.getAllRecipes({pageSize:this.pageSize,pageNumber:this.pageIndex,name:this.searchkey,tagId:this.tagId>0?this.tagId:null,categoryId:this.categoryId>0?this.categoryId:null}).subscribe({next:n=>{console.log(n),this.tableResponse=n,this.tableData=n.data}})}handlePageEvent(t){this.pageEvent=t,this.length=t.length,this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.getRecipes()}setPageSizeOptions(t){t&&(this.pageSizeOptions=t.split(",").map(n=>+n))}getAllTags(){this._HelperService.getTags().subscribe({next:t=>{console.log(t),this.tags=t}})}getAllcategories(){this._CategoryService.getAllCategories(1e3,1,"").subscribe({next:t=>{console.log(t),this.categories=t.data}})}openDeleteCategoryDialog(t){console.log(t),this.dialog.open(k.b,{data:t}).afterClosed().subscribe(o=>{console.log("The dialog was closed"),console.log(o),o&&this.deleteCategory(o)})}deleteCategory(t){this._RecipesService.onDeleteRecipe(t).subscribe({next:n=>{console.log(n)},error:()=>{},complete:()=>{this.getRecipes(),this._ToastrService.info("Deleted Successfuly")}})}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(f.M),e.rXU(F.w),e.rXU(R.F),e.rXU(v.bZ),e.rXU(b.tw))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-recipes"]],decls:45,vars:10,consts:[[1,"header-page","container"],[1,"row","align-items-center"],[1,"col-8"],[1,"ms-2"],[1,"mb-0"],[1,"col-4","text-end"],["src","../../../../assets/images/profile 1.svg","alt","",1,"w-50"],[1,"container","mt-4","row","d-flex","align-items-center"],[1,"row","justify-content-between"],[1,"col-3"],[1,"col-2"],[1,"bg-main","text-white",3,"routerLink"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-magnifying-glass"],["type","text","placeholder","Search By Name","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table","table-striped"],[1,"text-center"],[4,"ngFor","ngForOf"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"w-25","text-center"],["alt","",1,"w-25",3,"src"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["color","primary"],["menu","matMenu"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["src","../../../../assets/images/nodata.svg","alt",""]],template:function(n,o){1&n&&(e.j41(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h4",3),e.EFF(5,"Recipes "),e.j41(6,"span"),e.EFF(7,"item"),e.k0s()(),e.j41(8,"p",4),e.EFF(9,"You can now add your items that any user can order it from the Application and you can edit."),e.k0s()(),e.j41(10,"div",5),e.nrm(11,"img",6),e.k0s()()(),e.j41(12,"div",7)(13,"div",8)(14,"div",9)(15,"h6"),e.EFF(16,"Recipes Table Details"),e.k0s(),e.j41(17,"p"),e.EFF(18,"You can check all details"),e.k0s()(),e.j41(19,"div",10)(20,"button",11),e.EFF(21,"Add new Recipe"),e.k0s()()(),e.j41(22,"div",9)(23,"div",12)(24,"span",13),e.nrm(25,"i",14),e.k0s(),e.j41(26,"input",15),e.bIt("ngModelChange",function(l){return o.searchkey=l})("keyup.enter",function(){return o.getRecipes()}),e.k0s()()(),e.j41(27,"div",9)(28,"mat-form-field")(29,"mat-label"),e.EFF(30,"Choose Tag"),e.k0s(),e.j41(31,"mat-select",16),e.bIt("ngModelChange",function(l){return o.tagId=l})("selectionChange",function(){return o.getRecipes()}),e.j41(32,"mat-option",17),e.EFF(33,"All"),e.k0s(),e.DNE(34,x,2,2,"mat-option",18),e.k0s()()(),e.j41(35,"div",9)(36,"mat-form-field")(37,"mat-label"),e.EFF(38,"Choose Category"),e.k0s(),e.j41(39,"mat-select",16),e.bIt("ngModelChange",function(l){return o.categoryId=l})("selectionChange",function(){return o.getRecipes()}),e.j41(40,"mat-option",17),e.EFF(41,"All"),e.k0s(),e.DNE(42,$,2,2,"mat-option",18),e.k0s()()()(),e.DNE(43,M,24,6,"div",19),e.DNE(44,w,5,0,"div",19),e.k0s()),2&n&&(e.R7$(20),e.Y8G("routerLink","add"),e.R7$(6),e.Y8G("ngModel",o.searchkey),e.R7$(5),e.Y8G("ngModel",o.tagId),e.R7$(1),e.Y8G("value",0),e.R7$(2),e.Y8G("ngForOf",o.tags),e.R7$(5),e.Y8G("ngModel",o.categoryId),e.R7$(1),e.Y8G("value",0),e.R7$(2),e.Y8G("ngForOf",o.categories),e.R7$(1),e.Y8G("ngIf",o.tableData.length>0),e.R7$(1),e.Y8G("ngIf",0==o.tableData.length))},dependencies:[d.Sq,d.bT,p.Wk,a.me,a.BC,C.An,h.kk,h.fb,h.Cp,I.iY,S.iy,a.vS,m.rl,m.nJ,j.VO,_.wT,d.vh]})}}return i})();var g=s(4671);function Y(i,r){if(1&i&&(e.j41(0,"mat-option",29),e.EFF(1),e.k0s()),2&i){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(1),e.JRh(t.name)}}function A(i,r){if(1&i&&(e.j41(0,"mat-option",29),e.EFF(1),e.k0s()),2&i){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(1),e.JRh(t.name)}}function N(i,r){1&i&&(e.j41(0,"ngx-dropzone-label"),e.EFF(1,"Drag and Drop image "),e.j41(2,"span",30),e.EFF(3,"Choose image "),e.k0s(),e.EFF(4,"to upload"),e.k0s())}function O(i,r){if(1&i&&(e.j41(0,"ngx-dropzone-label"),e.nrm(1,"img",31),e.k0s()),2&i){const t=e.XpG();e.R7$(1),e.Y8G("src",t.imgSrc,e.B4B)}}function U(i,r){if(1&i){const t=e.RV6();e.j41(0,"ngx-dropzone-image-preview",32),e.bIt("removed",function(){const c=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.onRemove(c))}),e.j41(1,"ngx-dropzone-label"),e.EFF(2),e.k0s()()}if(2&i){const t=r.$implicit;e.Y8G("removable",!0)("file",t),e.R7$(2),e.SpI("(",t.type,")")}}const B=function(){return["/dashboard/admin/recipes"]};let E=(()=>{class i{constructor(t,n,o,c,l,V,L,H){this.router=t,this._ActivatedRoute=n,this._router=o,this._CategoryService=c,this._HelperService=l,this.dialog=V,this._RecipesService=L,this._ToastrService=H,this.tags=[],this.categories=[],this.recipeId=0,this.imgUrl="https://upskilling-egypt.com:3006/",this.files=[],this.ids=[],this.recipeForm=new a.gE({name:new a.MJ(null),description:new a.MJ(null),price:new a.MJ(null),tagId:new a.MJ(null),recipeImage:new a.MJ(null),categoriesIds:new a.MJ(null)}),console.log(this.recipeId),this.recipeId=n.snapshot.params.id}ngOnInit(){this.getAllTags(),this.getAllcategories(),this.recipeId&&this.getRecipeById(this.recipeId)}getAllTags(){this._HelperService.getTags().subscribe({next:t=>{console.log(t),this.tags=t}})}getAllcategories(){this._CategoryService.getAllCategories(1e3,1,"").subscribe({next:t=>{console.log(t),this.categories=t.data}})}onSelect(t){console.log(t),this.imgSrc=t.addedFiles[0],this.recipeForm.get("recipeImage")?.setValue(this.imgSrc),this.files.push(...t.addedFiles)}onRemove(t){console.log(t),this.files.splice(this.files.indexOf(t),1)}onSubmit(t){console.log(t.value),t.value.id=this.recipeId;let n=new FormData;n.append("name",t.value.name),n.append("description",t.value.description),n.append("price",t.value.price),n.append("tagId",t.value.tagId),n.append("categoriesIds",t.value.categoriesIds),n.append("recipeImage",this.imgSrc,this.imgSrc.name),this.recipeId?(n.append("id",t.value.id),this.editRecipe(n)):this.addRecipe(n)}addRecipe(t){this._RecipesService.onAddRecipe(t).subscribe({next:n=>{console.log(n)},error:()=>{},complete:()=>{this._ToastrService.success("Added Successfully"),this.router.navigate(["/dashboard/admin/recipes"])}})}editRecipe(t){this._RecipesService.onEditRecipe(this.recipeId,t).subscribe({next:n=>{console.log(n)},error:()=>{},complete:()=>{this._ToastrService.success("Edit Successfully"),this.router.navigate(["/dashboard/admin/recipes"])}})}getRecipeById(t){this._RecipesService.getRecipeById(t).subscribe({next:n=>{console.log(n),this.recipeData=n},error:()=>{},complete:()=>{let n=[...this.recipeData.category];this.ids=n.map(o=>o.id),this.imgSrc=this.imgUrl+this.recipeData.imagePath,this.recipeForm.patchValue({name:this.recipeData.name,description:this.recipeData.description,price:this.recipeData.price,tagId:this.recipeData.tag.id,recipeImage:this.recipeData.recipeImage,categoriesIds:this.recipeData.category.map(o=>o.id)})}})}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(p.Ix),e.rXU(p.nX),e.rXU(p.Ix),e.rXU(f.M),e.rXU(F.w),e.rXU(v.bZ),e.rXU(R.F),e.rXU(b.tw))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-add-edit-recipe"]],decls:58,vars:9,consts:[["id","fillRecipe"],[1,"row","align-items-center","justify-content-center","p-4"],[1,"col-8"],[1,"text-main"],[1,"col-4","text-end"],[1,"bg-main","text-white"],[1,"mx-2"],[1,"fa-solid","fa-arrow-right"],[3,"formGroup","ngSubmit"],[1,"container"],[1,"row","py-5"],[1,"col-9","mx-auto"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-utensils"],["formControlName","name","type","text","placeholder","Recipe name","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],["formControlName","description","type","text","placeholder","Description","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],["formControlName","price","type","number","placeholder","Price","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],["appearance","outline",1,"w-100"],["formControlName","tagId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","categoriesIds","multiple",""],[1,"col-12","text-center"],[3,"multiple","change"],[4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],[1,"btn","btn-outline-success","mx-2",3,"routerLink"],[1,"bg-success","text-white","btn","px-4"],[3,"value"],[1,"text-success","fw-bold"],["alt","",1,"w-25",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed"]],template:function(n,o){1&n&&(e.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"h3"),e.EFF(4,"Fill the "),e.j41(5,"span",3),e.EFF(6,"Recipes"),e.k0s(),e.EFF(7," ! "),e.k0s(),e.j41(8,"p"),e.EFF(9,"you can now fill the meals easily using the table and form , click here and sill it with the table !"),e.k0s()(),e.j41(10,"div",4)(11,"button",5)(12,"span"),e.EFF(13,"Fill Recipes"),e.k0s(),e.j41(14,"span",6),e.nrm(15,"i",7),e.k0s()()()()(),e.j41(16,"section")(17,"form",8),e.bIt("ngSubmit",function(){return o.onSubmit(o.recipeForm)}),e.j41(18,"div",9)(19,"div",10)(20,"div",11)(21,"div",12)(22,"span",13),e.nrm(23,"i",14),e.k0s(),e.nrm(24,"input",15),e.k0s(),e.j41(25,"div",12)(26,"span",13),e.nrm(27,"i",14),e.k0s(),e.j41(28,"textarea",16),e.EFF(29,"                        "),e.k0s()(),e.j41(30,"div",12)(31,"span",13),e.nrm(32,"i",14),e.k0s(),e.nrm(33,"input",17),e.k0s(),e.j41(34,"div")(35,"mat-form-field",18)(36,"mat-label"),e.EFF(37,"Tags"),e.k0s(),e.j41(38,"mat-select",19),e.DNE(39,Y,2,2,"mat-option",20),e.k0s()()(),e.j41(40,"div")(41,"mat-form-field",18)(42,"mat-label"),e.EFF(43,"Categories"),e.k0s(),e.j41(44,"mat-select",21),e.DNE(45,A,2,2,"mat-option",20),e.k0s()()(),e.j41(46,"div",22)(47,"ngx-dropzone",23),e.bIt("change",function(l){return o.onSelect(l)}),e.DNE(48,N,5,0,"ngx-dropzone-label",24),e.DNE(49,O,2,1,"ngx-dropzone-label",24),e.DNE(50,U,3,3,"ngx-dropzone-image-preview",25),e.k0s()(),e.j41(51,"div"),e.nrm(52,"hr"),e.j41(53,"div",26)(54,"button",27),e.EFF(55,"Cancel"),e.k0s(),e.j41(56,"button",28),e.EFF(57,"Save"),e.k0s()()()()()()()()),2&n&&(e.R7$(17),e.Y8G("formGroup",o.recipeForm),e.R7$(22),e.Y8G("ngForOf",o.tags),e.R7$(6),e.Y8G("ngForOf",o.categories),e.R7$(2),e.Y8G("multiple",!1),e.R7$(1),e.Y8G("ngIf",!o.imgSrc),e.R7$(1),e.Y8G("ngIf",o.imgSrc),e.R7$(1),e.Y8G("ngForOf",o.files),e.R7$(4),e.Y8G("routerLink",e.lJ4(8,B)))},dependencies:[d.Sq,d.bT,p.Wk,a.qT,a.me,a.Q0,a.BC,a.cb,a.j4,a.JD,m.rl,m.nJ,j.VO,_.wT,g.s3,g.Gt,g.bB],styles:[".fillRecipe[_ngcontent-%COMP%]{background-color:#f0ffef;border-radius:15px;margin-top:1rem;padding:0px 1rem}"]})}}return i})();const J=[{path:"",component:z},{path:"add",component:E},{path:"edit/:id",component:E}];let X=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[p.iI.forChild(J),p.iI]})}}return i})(),P=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[d.MD,X,y.G,g.Fg]})}}return i})()}}]);