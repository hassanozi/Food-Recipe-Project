"use strict";(self.webpackChunkFood_Recipe_Project=self.webpackChunkFood_Recipe_Project||[]).push([[980],{7980:(C,p,s)=>{s.r(p),s.d(p,{ProfileModule:()=>x});var l=s(177),m=s(7062),n=s(9417),e=s(7705),d=s(2735),f=s(5794),u=s(4671);function h(t,w){if(1&t){const r=e.RV6();e.j41(0,"ngx-dropzone-image-preview",20),e.bIt("removed",function(){const a=e.eBV(r).$implicit,c=e.XpG();return e.Njj(c.onRemove(a))}),e.nrm(1,"ngx-dropzone-label"),e.k0s()}if(2&t){const r=w.$implicit;e.Y8G("removable",!0)("file",r)}}const g=[{path:"",component:(()=>{class t{constructor(r,o){this._UserService=r,this._ToastrService=o,this.imgUrl="https://upskilling-egypt.com:3006/",this.files=[],this.userForm=new n.gE({id:new n.MJ(null),userName:new n.MJ(null),country:new n.MJ(null),email:new n.MJ(null),phoneNumber:new n.MJ(null),creationDate:new n.MJ(null),group:new n.MJ(null),confirmPassword:new n.MJ(null),profileImage:new n.MJ(null)})}ngOnInit(){this.loadCurrentUser()}loadCurrentUser(){this._UserService.getProfile().subscribe({next:r=>{console.log(r),this.userData=r,this.imgSrc=this.imgUrl+this.userData.imagePath,console.log(this.imgSrc),this.userForm.patchValue({userName:this.userData.userName,country:this.userData.country,email:this.userData.email,phoneNumber:this.userData.phoneNumber,creationDate:this.userData.creationDate,group:this.userData.group.name,profileImage:this.userData.imagePath})},error:r=>{console.log(r)},complete:()=>{}})}onSubmit(r){console.log(r.value),r.value.id=this.userId;let o=new FormData;o.append("userName",r.value.userName),o.append("country",r.value.country),o.append("email",r.value.email),o.append("phoneNumber",r.value.phoneNumber),o.append("group",r.value.group.name),o.append("confirmPassword",r.value.confirmPassword),o.append("profileImage",this.imgSrc,this.imgSrc.name),this._UserService.updateProfile(o).subscribe({next:i=>{console.log(i)},error:i=>{console.log(i),this._ToastrService.error(i)},complete:()=>{this._ToastrService.success("Successfully Done")}})}onSelect(r){console.log(r),this.imgSrc=r.addedFiles[0],this.userForm.get("profileImage")?.setValue(this.imgSrc),this.files.push(...r.addedFiles)}onRemove(r){console.log(r),this.files.splice(this.files.indexOf(r),1)}static{this.\u0275fac=function(o){return new(o||t)(e.rXU(d.D),e.rXU(f.tw))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-profile"]],decls:43,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"row","py-5"],[1,"col-9","mx-auto"],[1,"mx-auto","text-center"],[1,"col-12","p-3"],[1,"rounded-circle","w-25","mx-auto",3,"multiple","change"],["class","mx-auto","ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-user"],["formControlName","userName","type","text","placeholder","userName","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],["formControlName","country","type","text","placeholder","country","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],["formControlName","email","type","text","placeholder","email","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],["formControlName","phoneNumber","type","number","placeholder","phoneNumber","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],["formControlName","creationDate","type","text","placeholder","creationDate","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"value"],["formControlName","confirmPassword","type","text","placeholder","confirmPassword","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],[1,"d-flex","justify-content-end"],["routerLink","/dashboard/user/recipes",1,"outline-main","mx-2"],[1,"main","px-5"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],1,"mx-auto",3,"removable","file","removed"]],template:function(o,i){if(1&o&&(e.j41(0,"section")(1,"form",0),e.bIt("ngSubmit",function(){return i.onSubmit(i.userForm)}),e.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"ngx-dropzone",6),e.bIt("change",function(c){return i.onSelect(c)}),e.j41(8,"ngx-dropzone-label"),e.EFF(9,"Drop Image"),e.k0s(),e.DNE(10,h,2,2,"ngx-dropzone-image-preview",7),e.k0s()()(),e.j41(11,"div",8)(12,"span",9),e.nrm(13,"i",10),e.k0s(),e.nrm(14,"input",11),e.k0s(),e.j41(15,"div",8)(16,"span",9),e.nrm(17,"i",10),e.k0s(),e.nrm(18,"input",12),e.k0s(),e.j41(19,"div",8)(20,"span",9),e.nrm(21,"i",10),e.k0s(),e.nrm(22,"input",13),e.k0s(),e.j41(23,"div",8)(24,"span",9),e.nrm(25,"i",10),e.k0s(),e.nrm(26,"input",14),e.k0s(),e.j41(27,"div",8)(28,"span",9),e.nrm(29,"i",10),e.k0s(),e.nrm(30,"input",15),e.nI1(31,"date"),e.k0s(),e.j41(32,"div",8)(33,"span",9),e.nrm(34,"i",10),e.k0s(),e.nrm(35,"input",16),e.k0s(),e.j41(36,"div"),e.nrm(37,"hr"),e.j41(38,"div",17)(39,"button",18),e.EFF(40,"Cancel"),e.k0s(),e.j41(41,"button",19),e.EFF(42,"Save"),e.k0s()()()()()()()()),2&o){let a;e.R7$(1),e.Y8G("formGroup",i.userForm),e.R7$(6),e.Y8G("multiple",!1),e.R7$(3),e.Y8G("ngForOf",i.files),e.R7$(20),e.Y8G("value",e.bMT(31,4,null==(a=i.userForm.get("creationDate"))?null:a.value))}},dependencies:[l.Sq,n.qT,n.me,n.Q0,n.BC,n.cb,n.j4,n.JD,m.Wk,u.s3,u.Gt,u.bB,l.vh]})}}return t})()}];let v=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[m.iI.forChild(g),m.iI]})}}return t})();var b=s(3887);let x=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[l.MD,b.G,v]})}}return t})()}}]);